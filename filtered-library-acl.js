function updateSelection(t,e,a){var r=$(t).find(".active").toArray(),i=[];$(r).each(function(){var t=$(this).attr("data-filter");i.push(t)}),e.indexOf("-")>-1&&(e=e.substring(0,e.indexOf("-"))),a[e]=i}function updateFilters(){var t=$(".filter-button-group").toArray(),e={};$(t).each(function(){var t=$(this),a=$(t).attr("class").split(/\s+/)[0];updateSelection("."+a,a,e)});var a=concatFilters(e);$(".SearchResults.HLLandingControl .Content > ul ").isotope({filter:a})}function concatFilters(t){var e=[];for(var a in t){var r=t[a];if(r.length)if(e.length){for(var i=[],l=0;l<e.length;l++)for(var n=0;n<r.length;n++){var s=e[l]+r[n];i.push(s)}e=i}else e=r.slice(0)}return e=e.join(", ")}function makinFilters(){categoryList=[],$(".label-search-tag").each(function(){var t=$(this);categoriesMaster={};var e=$(t).attr("aria-label"),a=e.indexOf(":"),r=e.slice(6,a),i=e.indexOf("tag=")+4,l=e.slice(i,e.length);categoriesMaster.categoryType=r,categoriesMaster.tag=l,categoryList.push(categoriesMaster)}),categoryList.forEach(function(t){var e=t.categoryType;e=e.replace(/\s+/g,"-").toLowerCase();var a=t.tag;a=a.replace(/\\|\//,"").replace(/\s+/g,"-").toLowerCase(),0===$(".dropdown-group .HtmlContent > div."+e+".filter-button-group").length&&$(".dropdown-group .HtmlContent").append('<div class="'+e+' filter-button-group "><div class="filter-content"><span class="filter-label">Filter by '+t.categoryType+'</span><ul class="multiple-select"></ul></div></div>'),$(".filter-button-group").hasClass(e)&&0===$('ul.multiple-select > li.checkbox-filter label input[data-filter=".'+a+'"]').length&&$("div."+e+".filter-button-group ul.multiple-select").append('<li class="checkbox-filter"><label class="container"><input type="checkbox" id="'+t.tag+'" data-filter=".'+a+'">'+t.tag+'<span class="checkmark"></span></label></li>')}),$(".filter-button-group").wrapAll('<div class="row "/>'),$(".filter-button-group .filter-content .multiple-select").prepend('<li class="checkbox-filter"><label class="container"><input type="checkbox" id="all" data-filter="">Show All Types<span class="checkmark"></span></label></li>')}$(function(){$('div[id*="ResultPanel"].SearchResults.HLLandingControl').parent().prepend('<div class="dropdown-group"><div class="HtmlContent"></div></div>'),$(".SearchResults.HLLandingControl ul li").each(function(){var t=$(this),e=$(t).find("a.label-search-tag").toArray(),a=$(t).find("h3"),r=$(a).find("a").attr("href"),i=$(t).find('a.label-search-tag[aria-label*="Content Type"]'),l=$(i).attr("href"),n=$(t).find('div[id*="NameBlock"]');$(n).append($('<a href="'+l+'" class="content-type-tags '+$(i).text().trim()+'">'+$(i).text().trim()+"</a>"));var s=$(t).find(".HLMListDocType:first-of-type");$(a).parent().parent().prepend('<a href="'+r+'"><div class="img-container"/></a>');var o=$(t).find(".row.margin-bottom-medium > .col-md-12 img");if(0===$(o).length)o=$(t).find('div[id*="fileListInlineWrapper"] .listIconContainer div[id*="pnlImages"] a img');var c=$(o).attr("src"),p=$(t).find(".img-container");$(p).css("background-image",'url("'+c+'")'),'url("https://baldrigefoundation.connectedcommunity.org/communities/community-home/undefined")'===$(p).css("background-image")&&$(s).clone().appendTo(p);var f=$(t).find(".libListReptEntAttchLble");if($(f).parent().addClass("attachment-wrap"),$(t).addClass("iso"),e.length)for(var d=0;d<e.length;d++){var u=$(e[d]).attr("data-tag").toLowerCase();u=(u=u.replace(/\\|\//,"")).replace(/\s+/g,"-"),$(t).addClass(u)}}),makinFilters(),$(".filter-label").click(function(){$(this).parent().toggleClass("open")}),$(".SearchResults.HLLandingControl .Content > ul ").isotope({itemSelector:"li"});var t=$(".filter-button-group");$(t).each(function(e){w=window;var a=t[e];firstFilterClass=a.className.split(" ")[0],w["arr_"+firstFilterClass]=[]}),$(".checkbox-filter input").click(function(){var t,e=$(this),a=$(e).parents(".filter-button-group"),r=$(a).find(".checkbox-filter input").toArray(),i=$(a).attr("class").split(/\s+/)[0],l=$(a).find(".filter-label"),n=$(e).attr("id").toLowerCase(),s="Filter by";$(e).toggleClass("active");var o=$(e).attr("data-filter");if(!o&&$(e).hasClass("active"))for(var c=1;c<r.length;c++){var p=r[c];$(p).removeClass("active"),p.checked=!1}else $(r[0]).removeClass("active"),r[0].checked=!1;if(n=n.replace("-"," "),filterButtonGroup=$(".filter-button-group"),$(filterButtonGroup).each(function(e){var a=filterButtonGroup[e].className.split(" ")[0],r=a.replace(/-/g," ");switch(i){case a:o||(w["arr_"+a]=[]),t=w["arr_"+a],s+=" "+r}}),$(e).hasClass("active")&&n&&"all"!==n)t.push(n);else{var f=t.indexOf(n);-1!==f&&t.splice(f,1)}t.length?(t=t.join(", "),$(l).text(t),$(a).find(".filter-content").addClass("has-selection")):($(l).text(s),$(a).find(".filter-content").removeClass("has-selection")),updateFilters()}),$(document).click(function(t){var e,a=t.target;if($(a).parents(".filter-content").length){var r=$(a).parents(".filter-content");e=".filter-button-group:not(."+$(r).parent().attr("class").split(/\s+/)[0]+") .filter-content"}else e=".filter-content";$(e).removeClass("open")})});