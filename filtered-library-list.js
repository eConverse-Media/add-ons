function updateSelection(t,e,a){var i=$(t).find(".active").toArray(),r=[];$(i).each(function(){var t=$(this).attr("data-filter");r.push(t)}),e.indexOf("-")>-1&&(e=e.substring(0,e.indexOf("-"))),a[e]=r}function updateFilters(){var t=$(".filter-button-group").toArray(),e={};$(t).each(function(){var t=$(this),a=$(t).attr("class").split(/\s+/)[0];updateSelection("."+a,a,e)});var a=concatFilters(e);$("div[id*='DocumentPanel'] .row > .col-md-12 .Content div[id*='ListViewContent']").isotope({filter:a})}function concatFilters(t){var e=[];for(var a in t){var i=t[a];if(i.length)if(e.length){for(var r=[],l=0;l<e.length;l++)for(var n=0;n<i.length;n++){var s=e[l]+i[n];r.push(s)}e=r}else e=i.slice(0)}return e=e.join(", ")}function makinFilters(){categoryList=[],$('.label-search-tag:not([aria-label*="User"])').each(function(){var t=$(this);categoriesMaster={};var e=$(t).attr("aria-label"),a=e.indexOf(":"),i=e.slice(6,a),r=e.indexOf("tag=")+4,l=e.slice(r,e.length);categoriesMaster.categoryType=i,categoriesMaster.tag=l,categoryList.push(categoriesMaster)}),categoryList.forEach(function(t){var e=t.categoryType;e=e.replace(/\s+/g,"-").toLowerCase();var a=t.tag;a=a.replace(/\s+/g,"-").toLowerCase(),0===$(".dropdown-group .HtmlContent > div."+e+".filter-button-group").length&&$(".dropdown-group .HtmlContent").append('<div class="'+e+' filter-button-group "><div class="filter-content"><span class="filter-label">Filter by '+t.categoryType+'</span><ul class="multiple-select"></ul></div></div>'),$(".filter-button-group").hasClass(e)&&0===$('ul.multiple-select > li.checkbox-filter label input[data-filter=".'+a+'"]').length&&$("div."+e+".filter-button-group ul.multiple-select").append('<li class="checkbox-filter"><label class="container"><input type="checkbox" id="'+t.tag+'" data-filter=".'+a+'">'+t.tag+'<span class="checkmark"></span></label></li>')}),$(".filter-button-group").wrapAll('<div class="row "/>'),$(".filter-button-group .filter-content .multiple-select").prepend('<li class="checkbox-filter"><label class="container"><input type="checkbox" id="all" data-filter="">Show All Types<span class="checkmark"></span></label></li>')}$(function(){$('div[id*="DocumentPanel"]').parent().prepend('<div class="dropdown-group"><div class="HtmlContent"></div></div>'),$(".library-list").each(function(){var t=$(this),e=$(t).find("a.label-search-tag").toArray(),a=$(t).find("h3"),i=$(a).find("a").attr("href");$(a).parent().parent().prepend('<a href="'+i+'"><div class="img-container"/></a>');var r=$(t).find('div[id*="fileListInlineWrapper"] .listIconContainer div[id*="pnlImages"] a img'),l=$(r).attr("src"),n=$(t).find(".img-container");$(n).css("background-image",'url("'+l+'")');var s=$(t).find(".libListReptEntAttchLble");if($(s).parent().addClass("attachment-wrap"),$(t).addClass("iso"),e.length)for(var o=0;o<e.length;o++){var c=$(e[o]).attr("data-tag").toLowerCase();c=c.replace(/\s+/g,"-"),$(t).addClass(c)}}),makinFilters(),$(".filter-label").click(function(){$(this).parent().toggleClass("open")}),$("div[id*='DocumentPanel'] .row > .col-md-12 .Content div[id*='ListViewContent']").isotope({itemSelector:".library-list"});var t=$(".filter-button-group");$(t).each(function(e){w=window;var a=t[e];firstFilterClass=a.className.split(" ")[0],w["arr_"+firstFilterClass]=[]}),$(".checkbox-filter input").click(function(){var t,e=$(this),a=$(e).parents(".filter-button-group"),i=$(a).find(".checkbox-filter input").toArray(),r=$(a).attr("class").split(/\s+/)[0],l=$(a).find(".filter-label"),n=$(e).attr("id").toLowerCase(),s="Filter by";$(e).toggleClass("active");var o=$(e).attr("data-filter");if(!o&&$(e).hasClass("active"))for(var c=1;c<i.length;c++){var p=i[c];$(p).removeClass("active"),p.checked=!1}else $(i[0]).removeClass("active"),i[0].checked=!1;if(n=n.replace("-"," "),filterButtonGroup=$(".filter-button-group"),$(filterButtonGroup).each(function(e){var a=filterButtonGroup[e].className.split(" ")[0],i=a.replace(/-/g," ");switch(r){case a:o||(w["arr_"+a]=[]),t=w["arr_"+a],s+=" "+i}}),$(e).hasClass("active")&&n&&"all"!==n)t.push(n);else{var f=t.indexOf(n);-1!==f&&t.splice(f,1)}t.length?(t=t.join(", "),$(l).text(t),$(a).find(".filter-content").addClass("has-selection")):($(l).text(s),$(a).find(".filter-content").removeClass("has-selection")),updateFilters()}),$(document).click(function(t){var e,a=t.target;if($(a).parents(".filter-content").length){var i=$(a).parents(".filter-content");e=".filter-button-group:not(."+$(i).parent().attr("class").split(/\s+/)[0]+") .filter-content"}else e=".filter-content";$(e).removeClass("open")})});